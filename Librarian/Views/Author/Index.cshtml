@model Librarian.Models.Multi<Librarian.Models.Author>


@{
    ViewBag.Title = "Authors";
}

<h2>Authors</h2>

<p>
    (create new link)
</p>
<table class="table">
    <tr>
        <th>
            First Name
        </th>
        <th>
            Last Name
        </th>
        <th>
            Suffix
        </th>
        <th></th>
    </tr>
    <tr ng-repeat="author in controller.authors | orderBy : 'LastName'">
        <td>{{ author.FirstName }}</td>
        <td>{{ author.LastName }}</td>
        <td>{{ author.Suffix }}</td>
        <td><a href="#" ng-click="controller.displayAuthor(author)"</td>
    </tr>
@*@foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.FirstName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.LastName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Suffix)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id=item.ID }) |
                @Html.ActionLink("Details", "Details", new { id=item.ID }) |
                @Html.ActionLink("Delete", "Delete", new { id=item.ID })
            </td>
        </tr>
    }*@
</table>
<input class="model-container" type="hidden" value='@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model.AsEnumerable()))' />
<div id="authorPopupContainer"></div>
@section scripts {
<script>
    Librarian.app.controller("authorCtrl", function authorCtrl() {
        var that = this;

        that.authors = JSON.parse($(".model-container").val());

        that.displayAuthor = function (author) {
            that.author = author;
            $("#authorPopupContainer").append($("div")).dialog()
        };
    });
</script>
}